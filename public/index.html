<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Expenso</title>
    <link href="css/styles.css" rel="stylesheet" type="text/css">
    <script src="js\scripts.js"></script>
    <script src="..\functions\index.js"></script>
</head>

<body>
    <div id="bg">
        <img src="img/receiptbackground.jpg" alt="receiptbackground">
    </div>
    <header>
        <nav>
            <ul>
                <li><a href="">Log out</a></li>
            </ul>
        </nav>
    </header>

    <div class="wrapper backgroundimg">
        <div class="title">
            <h1> Expense Calculator </h1>
        </div>
        <div class="calc-form">
            <div class="input-fields">
                <label class="textinbox">Upload your receipt</label>
                <input type="file" class="input inputfile" id="img" name="img" accept="image/png, image/jpg">
                <!--
                <div class="dropdown input">
                    <button class="dropbtn">Expense</button>
                    <div class="doptions">
                        <a href="#">Water</a>
                        <a href="#">Food</a>
                        <a href="#">Gas</a>
                        <a href="#">Electricity</a>
                        <a href="#">Miscellaneous</a>
                    </div>
                </div>
                -->
                <form action="/action_page.php" class="expensetype">
                    <label for="expense-type" class="textinbox">Enter your expense type:</label>
                    <select id="expense-type" name="expense-type">
                        <option value='water'>Water</option>
                        <option value='food'>Food</option>
                        <option value='gas'>Gas</option>
                        <option value='electricity'>Electricity</option>
                        <option value='miscellaneous'>Miscellaneous expenses</option>
                    </select>
                </form>
                <label class="textinbox">Enter the amount in dollars</label>
                <input type="number" class="input" min="0" max="5000" placeholder="$25.00" id="dollaramount">
                <div class="btn" onclick=updateText()>Submit</div>
            </div>
        </div>
        <div class="output">
            <textarea placeholder="Results and advice" id="output"></textarea>
        </div>
    </div>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.16.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.16.1/firebase-analytics.js"></script>

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyDZpH9dnx6Fdcq0ZGdN6_PkRF7-7fm-XUs",
            authDomain: "yeah-boyyyyy.firebaseapp.com",
            databaseURL: "https://yeah-boyyyyy.firebaseio.com",
            projectId: "yeah-boyyyyy",
            storageBucket: "yeah-boyyyyy.appspot.com",
            messagingSenderId: "49844241593",
            appId: "1:49844241593:web:52b42c95aa57d0308ec768",
            measurementId: "G-B80HSSCH1D"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    </script>

    <script>
        function getOutput(amount, expensetype) {
            // @quarterdill replace with good text
            if (expensetype == "Water") {
                return "water"
            }
            if (expensetype == "Food") {
                return "food"
            }
            if (expensetype == "Gas") {
                return "gas"
            }
            if (expensetype == "Electricity") {
                return "electricity"
            }
            if (expensetype == "Miscellaneous") {
                return "miscellaneous"
            }
        }
        function updateText() {
            let amount = document.getElementById("dollaramount").value;
            let expenselist = document.getElementById("expense-type");
            let expensetype = expenselist.options[expenselist.selectedIndex].text;
            let outstring = getOutput(amount, expensetype);
            document.getElementById("output").value = outstring;

            var db = firebase.database();
            var ref = db.ref('test1');

            var data = {
                expense: expensetype,
                dollars: amount
            }

            ref.push(data);
        }
    </script>

</body>
</html>